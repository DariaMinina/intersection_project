function averageLength;
clc,close 

global A
A = [-1,0,0,0,0,0,0,0,0,0,0,0;
      1,-1,0,0,0,0,0,0,0,0,0,0;
      0,1,-1,0,0,0,0,0,0,0,0,0;
      0,0,1,-1,0,0,0,0,0,0,0,0;
      0,0,0,1,-1,0,0,0,0,0,0,0;
      0,0,0,0,1,-1,0,0,0,0,0,0;
      0,0,0,0,0,1,-1,0,0,0,0,0;
      0,0,0,0,0,0,1,-1,0,0,0,0;
      0,0,0,0,0,0,0,1,-1,0,0,0;
      0,0,0,0,0,0,0,0,1,-1,0,0;
      0,0,0,0,0,0,0,0,0,1,-1,0;
      0,0,0,0,0,0,0,0,0,0,1,0];

global B
B = [0,1,0,0,0,0,0,0,0,0,0,0;
     0,-1,1,0,0,0,0,0,0,0,0,0;
     0,0,-1,1,0,0,0,0,0,0,0,0;
     0,0,0,-1,1,0,0,0,0,0,0,0;
     0,0,0,0,-1,1,0,0,0,0,0,0;
     0,0,0,0,0,-1,1,0,0,0,0,0;
     0,0,0,0,0,0,-1,1,0,0,0,0;
     0,0,0,0,0,0,0,-1,1,0,0,0;
     0,0,0,0,0,0,0,0,-1,1,0,0;
     0,0,0,0,0,0,0,0,0,-1,1,0;
     0,0,0,0,0,0,0,0,0,0,-1,1;
     0,0,0,0,0,0,0,0,0,0,0,-1;];
%% Численное интегрирование дифф. уравнений
P0 = [1;0;0;zeros(length(A)-3,1)];
T = [0,1974];
[t,P] = ode23(@cmo, T, P0);
tr = t' ;
coeff = [0,0,0,0,0,0,0,0,0,0,0,0;
         0,1,0,0,0,0,0,0,0,0,0,0;
         0,0,2,0,0,0,0,0,0,0,0,0;
         0,0,0,3,0,0,0,0,0,0,0,0;
         0,0,0,0,4,0,0,0,0,0,0,0;
         0,0,0,0,0,5,0,0,0,0,0,0;
         0,0,0,0,0,0,6,0,0,0,0,0;
         0,0,0,0,0,0,0,7,0,0,0,0;
         0,0,0,0,0,0,0,0,8,0,0,0;
         0,0,0,0,0,0,0,0,0,9,0,0;
         0,0,0,0,0,0,0,0,0,0,10,0;
         0,0,0,0,0,0,0,0,0,0,0,11;];
Pnew = P * coeff;
S = sum(Pnew,2);
plot(t, S), grid, hold on
%title('Среднее число стоящих автомашин');
xlabel('t'); %временной интервал
ylabel('Q(t)'); %число машин стоящих в направлении


function f = cmo(t,P);
%% Функция описания правых частей 
%% дифференциальных уравнений
global A
global B
lambda = 0.2;
f = (lambda*A+nu(t)*B)*P;
